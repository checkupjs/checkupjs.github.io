"use strict";(self.webpackChunkcheckup_website=self.webpackChunkcheckup_website||[]).push([[3806],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return f}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),u=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(n),f=r,m=d["".concat(c,".").concat(f)]||d[f]||p[f]||o;return n?a.createElement(m,i(i({ref:t},l),{},{components:n})):a.createElement(m,i({ref:t},l))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8215:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},5064:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(7294),r=n(9443);var o=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=n(6010),s="tabItem_1uMI",c="tabItemActive_2DSg";var u=function(e){var t,n=e.lazy,r=e.block,u=e.defaultValue,l=e.values,p=e.groupId,d=e.className,f=a.Children.toArray(e.children),m=null!=l?l:f.map((function(e){return{value:e.props.value,label:e.props.label}})),g=null!=u?u:null==(t=f.find((function(e){return e.props.default})))?void 0:t.props.value,v=o(),h=v.tabGroupChoices,b=v.setTabGroupChoices,k=(0,a.useState)(g),y=k[0],T=k[1],w=[];if(null!=p){var O=h[p];null!=O&&O!==y&&m.some((function(e){return e.value===O}))&&T(O)}var j=function(e){var t=e.currentTarget,n=w.indexOf(t),a=m[n].value;T(a),null!=p&&(b(p,a),setTimeout((function(){var e,n,a,r,o,i,s,u;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,i=window,s=i.innerHeight,u=i.innerWidth,n>=0&&o<=u&&r<=s&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},E=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=w.indexOf(e.target)+1;n=w[a]||w[0];break;case"ArrowLeft":var r=w.indexOf(e.target)-1;n=w[r]||w[w.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":r},d)},m.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:(0,i.Z)("tabs__item",s,{"tabs__item--active":y===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:E,onFocus:j,onClick:j},null!=n?n:t)}))),n?(0,a.cloneElement)(f.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},9443:function(e,t,n){var a=(0,n(7294).createContext)(void 0);t.Z=a},8641:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return m}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=n(5064),s=n(8215),c=["components"],u={id:"actions",title:"Triggering Actions"},l=void 0,p={unversionedId:"guides/actions",id:"guides/actions",isDocsHomePage:!1,title:"Triggering Actions",description:"Tasks gather data from analyzed files, and sometimes you want to help add emphasis to specific parts of the data. This is accomplished through the use of actions.",source:"@site/docs/guides/actions.mdx",sourceDirName:"guides",slug:"/guides/actions",permalink:"/docs/guides/actions",editUrl:"https://github.com/checkupjs/checkup/edit/master/website/docs/guides/actions.mdx",tags:[],version:"current",frontMatter:{id:"actions",title:"Triggering Actions"},sidebar:"guidesSidebar",previous:{title:"Writing a Task",permalink:"/docs/guides/writing-tasks"},next:{title:"Using Analyzers",permalink:"/docs/guides/analyzers"}},d=[{value:"Writing an Action",id:"writing-an-action",children:[]}],f={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,c);return(0,o.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Tasks gather data from analyzed files, and sometimes you want to help add emphasis to specific parts of the data. This is accomplished through the use of actions."),(0,o.kt)("p",null,"Actions are declarative triggers that can be attached to any task. They are ran as a post-processing step on the results of the task, and any triggered actions are\nstored as part of the output."),(0,o.kt)("p",null,"To add actions to a plugin for a task, use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"checkup generate actions <actions name>\n")),(0,o.kt)("p",null,"You'll be prompted to identify the task you want to add the actions to."),(0,o.kt)("p",null,"This will generate the following file:"),(0,o.kt)(i.Z,{groupId:"js-flavor",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- src/actions/actions-name.ts\n"))),(0,o.kt)(s.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- src/actions/actions-name.js\n")))),(0,o.kt)("h2",{id:"writing-an-action"},"Writing an Action"),(0,o.kt)(i.Z,{groupId:"js-flavor",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/actions/actions-name.ts"',title:'"/actions/actions-name.ts"'},"import { ActionsEvaluator, TaskConfig } from '@checkup/core';\nimport { Result } from 'sarif';\n\nexport function evaluateActions(taskResults: Result[], taskConfig: TaskConfig) {\n  let actionsEvaluator = new ActionsEvaluator();\n  let occurances = taskResult.length;\n\n  actionsEvaluator.add({\n    taskName: 'task-name-to-run-actions-on',\n    name: 'task-name-bad-things',\n    summary: 'Reduce number of bad things',\n    details: `${occurances} usages of bad things`,\n    defaultThreshold: 2,\n    items: [`Total occurances: ${occurances}`],\n    input: occurances,\n  });\n\n  return actionsEvaluator.evaluate(taskConfig);\n}\n"))),(0,o.kt)(s.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/actions/actions-name.js"',title:'"/actions/actions-name.js"'},"import { ActionsEvaluator } from '@checkup/core';\n\nexport function evaluateActions(taskResults, taskConfig) {\n  let actionsEvaluator = new ActionsEvaluator();\n  let occurances = taskResult.length;\n\n  actionsEvaluator.add({\n    taskName: 'task-name-to-run-actions-on',\n    name: 'task-name-bad-things',\n    summary: 'Reduce number of bad things',\n    details: `${occurances} usages of bad things`,\n    defaultThreshold: 2,\n    items: [`Total occurances: ${occurances}`],\n    input: occurances,\n  });\n\n  return actionsEvaluator.evaluate(taskConfig);\n}\n")))))}m.isMDXComponent=!0},6010:function(e,t,n){function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);